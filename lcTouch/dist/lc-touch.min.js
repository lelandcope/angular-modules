/*! 
 lcTouch v0.0.8 
 Author: Leland Cope @lelandcope 
 2013-09-17 
 */

!function(exports,global){global["true"]=exports;var lcTouch;lcTouch=angular.module("lcTouch",[]),lcTouch.directive("ngTap",["$timeout",function($timeout){return function(scope,elem,attrs){var distanceThreshold,tapped,timeThreshold;return distanceThreshold=25,timeThreshold=500,tapped=!1,elem.on("touchstart",function(startEvent){var moveHandler,removeTapHandler,startX,startY,tapHandler,target,touchStart;return target=startEvent.target,touchStart=startEvent.originalEvent.touches[0],startX=touchStart.pageX,startY=touchStart.pageY,removeTapHandler=function(){return $timeout.cancel(),elem.off("touchmove",moveHandler),elem.off("touchend",tapHandler)},tapHandler=function(endEvent){return endEvent.preventDefault(),removeTapHandler(),alert(target===endEvent.target),target===endEvent.target?(tapped=!0,scope.$apply(attrs.ngTap)):void 0},moveHandler=function(moveEvent){var moveX,moveY,touchMove;return touchMove=moveEvent.originalEvent.touches[0],moveX=touchMove.pageX,moveY=touchMove.pageY,Math.abs(moveX-startX)>distanceThreshold||Math.abs(moveY-startY)>distanceThreshold?(tapped=!0,removeTapHandler()):void 0},$timeout(removeTapHandler,timeThreshold),elem.on("touchmove",moveHandler),elem.on("touchend",tapHandler)}),elem.bind("click",function(){return tapped?void 0:scope.$apply(attrs.ngTap)})}}]),lcTouch.directive("ngTapOutside",["$timeout",function($timeout){return function(scope,elem,attrs){var onElementTouchStart,onTouchEnd,stopEvent;return stopEvent=!1,angular.isDefined(attrs.when)?scope.$watch(attrs.when,function(newValue){return newValue===!0?$timeout(function(){return elem.bind("touchstart click",onElementTouchStart),$("html").bind("touchend click",onTouchEnd)}):(elem.unbind("touchstart click",onElementTouchStart),$("html").unbind("touchend click",onTouchEnd))}):(elem.bind("touchstart click",onElementTouchStart),$("html").bind("touchend click",onTouchEnd)),onTouchEnd=function(){return stopEvent?stopEvent=!1:$timeout(function(){return scope.$eval(attrs.ngTapOutside)},10)},onElementTouchStart=function(event){return event.stopPropagation(),stopEvent=!0},scope.$on("event:stopTapOutside",function(){return stopEvent=!0})}}])}({},function(){return this}());