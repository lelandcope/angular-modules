/*! 
 lcTouch v0.1.0 
 Author: Leland Cope @lelandcope 
 2013-10-23 
 */

!function(exports,global){global["true"]=exports;var lcTouch;lcTouch=angular.module("lcTouch",[]),lcTouch.directive("ngTap",["$timeout",function($timeout){return function(scope,elem,attrs){var distanceThreshold,tapped,timeThreshold;return distanceThreshold=25,timeThreshold=500,tapped=!1,elem.on("touchstart",function(startEvent){var moveHandler,removeTapHandler,startX,startY,tapHandler,target,touchStart;return target=startEvent.target,touchStart=startEvent.originalEvent.touches[0],startX=touchStart.pageX,startY=touchStart.pageY,removeTapHandler=function(){return $timeout.cancel(),elem.off("touchmove",moveHandler),elem.off("touchend",tapHandler)},tapHandler=function(endEvent){return endEvent.preventDefault(),removeTapHandler(),target===endEvent.target?(tapped=!0,scope.$apply(attrs.ngTap)):void 0},moveHandler=function(moveEvent){var moveX,moveY,touchMove;return touchMove=moveEvent.originalEvent.touches[0],moveX=touchMove.pageX,moveY=touchMove.pageY,Math.abs(moveX-startX)>distanceThreshold||Math.abs(moveY-startY)>distanceThreshold?(tapped=!0,removeTapHandler()):void 0},$timeout(removeTapHandler,timeThreshold),elem.on("touchmove",moveHandler),elem.on("touchend",tapHandler)}),elem.bind("click",function(){return tapped?void 0:scope.$apply(attrs.ngTap)})}}]),lcTouch.directive("ngTapOutside",["$timeout",function($timeout){return function(scope,elem,attrs){var onElementTouchStart,onTouchEnd,stopEvent;return stopEvent=!1,angular.isDefined(attrs.when)?scope.$watch(attrs.when,function(newValue){return newValue===!0?$timeout(function(){return elem.bind("touchstart click",onElementTouchStart),$("html").bind("touchend click",onTouchEnd)}):(elem.unbind("touchstart click",onElementTouchStart),$("html").unbind("touchend click",onTouchEnd))}):(elem.bind("touchstart click",onElementTouchStart),$("html").bind("touchend click",onTouchEnd)),onTouchEnd=function(){return stopEvent?stopEvent=!1:$timeout(function(){return scope.$eval(attrs.ngTapOutside)},10)},onElementTouchStart=function(event){return event.stopPropagation(),stopEvent=!0},scope.$on("event:stopTapOutside",function(){return stopEvent=!0})}}]),lcTouch.factory("$swipe",[function(){return{bind:function(elem,events){var endX,endY,ontouchend,ontouchmove,ontouchstart,startX,startY;return startX=0,startY=0,endX=0,endY=0,ontouchstart=function(e){var touch;return touch=e.originalEvent.touches[0],startX=touch.pageX,startY=touch.pageY,elem.on("touchmove",ontouchmove),elem.on("touchend",ontouchend),events.start?events.start(elem,[startX,startY]):void 0},ontouchmove=function(e){var touch;return touch=e.originalEvent.touches[0],endX=touch.pageX,endY=touch.pageY,events.move?events.move(elem,[endX,endY]):void 0},ontouchend=function(){return elem.off("touchmove",ontouchmove),elem.off("touchend",ontouchend),events.end&&events.end(elem,[startX-endX,startY-endY]),startX=0,startY=0,endX=0,endY=0},elem.on("touchstart",ontouchstart)}}}]),lcTouch.directive("ngSwipeDown",["$swipe",function($swipe){return{restrict:"A",link:function(scope,elem,attrs){var onend,threshold;return threshold=Number(attrs.ngSwipeDownThreshold)||70,onend=function(elem,amounts){var amount;return amount=amounts[1],0>amount&&Math.abs(amount)>=threshold?scope.$apply(attrs.ngSwipeDown):void 0},$swipe.bind(elem,{end:onend})}}}]),lcTouch.directive("ngSwipeUp",["$swipe",function($swipe){return{restrict:"A",link:function(scope,elem,attrs){var onend,threshold;return threshold=Number(attrs.ngSwipeUpThreshold)||70,onend=function(elem,amounts){var amount;return amount=amounts[1],amount>0&&Math.abs(amount)>=threshold?scope.$apply(attrs.ngSwipeUp):void 0},$swipe.bind(elem,{end:onend})}}}]),lcTouch.directive("ngSwipeRight",["$swipe",function($swipe){return{restrict:"A",link:function(scope,elem,attrs){var onend,threshold;return threshold=Number(attrs.ngSwipeRightThreshold)||70,onend=function(elem,amounts){var amount;return amount=amounts[0],0>amount&&Math.abs(amount)>=threshold?scope.$apply(attrs.ngSwipeRight):void 0},$swipe.bind(elem,{end:onend})}}}]),lcTouch.directive("ngSwipeLeft",["$swipe",function($swipe){return{restrict:"A",link:function(scope,elem,attrs){var onend,threshold;return threshold=Number(attrs.ngSwipeLeftThreshold)||70,onend=function(elem,amounts){var amount;return amount=amounts[0],amount>0&&Math.abs(amount)>=threshold?scope.$apply(attrs.ngSwipeLeft):void 0},$swipe.bind(elem,{end:onend})}}}])}({},function(){return this}());